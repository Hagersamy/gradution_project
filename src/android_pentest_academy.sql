-- phpMyAdmin SQL Dump
-- version 5.2.1
-- https://www.phpmyadmin.net/
--
-- Host: 127.0.0.1
-- Generation Time: May 23, 2025 at 11:14 AM
-- Server version: 10.4.32-MariaDB
-- PHP Version: 8.2.12

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `android_pentest_academy`
--

-- --------------------------------------------------------

--
-- Table structure for table `contact`
--

CREATE TABLE `contact` (
  `id` int(11) NOT NULL,
  `name` varchar(100) NOT NULL,
  `email` varchar(100) NOT NULL,
  `message` text NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `isSolved` tinyint(1) NOT NULL DEFAULT 0,
  `user_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `contact`
--

INSERT INTO `contact` (`id`, `name`, `email`, `message`, `created_at`, `isSolved`, `user_id`) VALUES
(1, 'sad', 'sad@gmail.com', 'mad', '2024-11-03 10:24:05', 1, 5),
(3, 'jbkn', 'rawan@gmail.com', 'jkhthyrteyhj', '2024-12-12 00:59:34', 1, 1),
(4, 'user1', 'user1@gmail.com', 'problem', '2025-01-15 06:48:28', 0, 21),
(5, 'user3', 'user3@gmail.com', 'i have a problem', '2025-01-15 07:13:28', 1, 23),
(6, 'omar', 'omar@security.com', 'problem 1', '2025-01-18 12:53:05', 0, 24);

-- --------------------------------------------------------

--
-- Table structure for table `functionality_for_roles`
--

CREATE TABLE `functionality_for_roles` (
  `id` int(11) NOT NULL,
  `role` enum('Hacker','Creator','Admin','Support') NOT NULL,
  `create_lab` tinyint(1) DEFAULT 0,
  `approve_lab` tinyint(1) DEFAULT 0,
  `resolve_tickets` tinyint(1) DEFAULT 0,
  `simulate_attacks` tinyint(1) DEFAULT 0,
  `edit_lab` tinyint(1) DEFAULT 0,
  `edit_self_lab` tinyint(1) NOT NULL DEFAULT 0,
  `edit_users` tinyint(1) DEFAULT 0,
  `delete_users` tinyint(1) DEFAULT 0,
  `edit_self` tinyint(1) DEFAULT 0,
  `delete_labs` tinyint(1) DEFAULT 0,
  `see_all_users` tinyint(1) DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `functionality_for_roles`
--

INSERT INTO `functionality_for_roles` (`id`, `role`, `create_lab`, `approve_lab`, `resolve_tickets`, `simulate_attacks`, `edit_lab`, `edit_self_lab`, `edit_users`, `delete_users`, `edit_self`, `delete_labs`, `see_all_users`) VALUES
(1, 'Admin', 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
(2, 'Creator', 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0),
(3, 'Hacker', 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0),
(4, 'Support', 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1);

-- --------------------------------------------------------

--
-- Table structure for table `labs`
--

CREATE TABLE `labs` (
  `lab_id` int(11) NOT NULL,
  `labname` varchar(255) NOT NULL,
  `laburl` varchar(255) NOT NULL,
  `severity` enum('Low','Medium','High','Critical') NOT NULL,
  `Lab_score` int(11) NOT NULL,
  `description` text DEFAULT NULL,
  `flag` varchar(100) DEFAULT NULL,
  `approved` tinyint(1) NOT NULL DEFAULT 0,
  `creator_id` int(11) NOT NULL,
  `admin_id` int(11) NOT NULL DEFAULT 1
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `labs`
--

INSERT INTO `labs` (`lab_id`, `labname`, `laburl`, `severity`, `Lab_score`, `description`, `flag`, `approved`, `creator_id`, `admin_id`) VALUES
(3, 'CSRF', 'https://academy.example.com/csrf-lab', 'High', 75, 'Cross-Site Request Forgery', 'FLAG{GoodJob}', 1, 5, 16),
(6, 'SSRF', 'uploads/6750e0c4028bf.apk', 'High', 75, 'Server-Side Request Forgery', 'FLAG{NiceOne}', 1, 8, 16),
(7, 'Sqli', 'uploads/6750e1001172a.apk', 'Critical', 100, 'SQL injection', 'FLAG{MayBeYouAreAGoodHacer}', 1, 8, 16),
(8, 'XSS', 'uploads/6750e220edaa3.apk', 'Low', 25, 'Cross-site scripting', 'FLAG{Try_HackMe}', 1, 18, 16),
(9, 'Hack me', 'uploads/6786efb8392d9.apk', 'Low', 25, 'Task Hijacking', 'FLAG{m42444}', 1, 16, 26),
(15, 'HardCoded Credential', 'uploads/6830028290213.apk', 'Low', 25, 'üéØ The Challenge:\r\nYour task is to reverse engineer the APK and find the hardcoded credentials .If you are  successful you will be granted access and see the FLAG.\r\nüïµÔ∏è‚Äç‚ôÇÔ∏è Hints:\r\n\r\n    Do not waste time guessing. Think like a hacker.\r\n\r\n    Dig into the APK. Tools like jadx or apktool might help.', 'FLAG{@HACKED}', 1, 28, 26),
(16, 'Insecure WebView', 'uploads/6830071b7ef30.apk', 'Critical', 100, 'üéØ The Challenge:\r\nCan you abuse the insecure WebView implementation to access internal files on the device?\r\nflag format:shared_prefs full Path\r\nüïµÔ∏è‚Äç‚ôÇÔ∏è Hints:\r\n\r\n    Think about how WebView can be tricked into exposing internal files.\r\n\r\n    Can you craft a malicious page or load a special URL to read local content?', '/data/data/com.example.vulnerablewebview1/shared_prefs/userData.xml', 1, 28, 26),
(17, 'sensitive data exposure', 'uploads/68300f3cb99c3.apk', 'High', 75, 'üéØ The Challenge:\r\nAccess the vulnerable Content Provider, If you are successful, you will be granted access and see the FLAG.\r\nüïµÔ∏è‚Äç‚ôÇÔ∏è Hints:\r\nThe Content Provider isn‚Äôt openly documented ‚Äî you‚Äôll need to dig into the APK to uncover its URI and access methods. Don‚Äôt expect the path to be obvious.', 'FLAG{C0nGrAtSzz}', 1, 28, 26),
(18, 'SQLi', 'uploads/6830138d31916.apk', 'Critical', 100, 'üéØ The Challenge:\r\nExploit a SQL Injection vulnerability in Content Provider to extract sensitive data from the database. \r\nIf you are successful, you will be granted access and see the FLAG', 'FLAG{SeCCrETtt}', 1, 28, 26),
(19, 'LFI', 'uploads/683014e26f14a.apk', 'Critical', 100, 'üéØ The Challenge:\r\nExploit the Content Provider with flawed file handling logic to bypass restrictions and access arbitrary files from the app private storage.\r\n\r\nIf you are  successful, you will be granted access and see the FLAG.', 'FLAG{c5836008c1649301e29351a55db8f65c}', 1, 28, 26),
(20, 'fhgfhng', 'uploads/68302a2c5202b.apk', 'Low', 100, 'hfgdfzsZDxfcghg&#039;wll , we&#039;re &amp;mbm', 'vhvjbjkb', 0, 28, 1);

-- --------------------------------------------------------

--
-- Table structure for table `lab_attempts`
--

CREATE TABLE `lab_attempts` (
  `attempt_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `lab_id` int(11) NOT NULL,
  `failed_attempts` int(11) NOT NULL DEFAULT 0,
  `is_solved` tinyint(1) DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `lab_attempts`
--

INSERT INTO `lab_attempts` (`attempt_id`, `user_id`, `lab_id`, `failed_attempts`, `is_solved`) VALUES
(6, 21, 7, 0, 1),
(7, 21, 7, 1, 0),
(8, 5, 6, 1, 0),
(9, 23, 7, 1, 0),
(10, 23, 7, 0, 1),
(11, 5, 6, 1, 0),
(12, 24, 8, 1, 0),
(13, 24, 8, 1, 0),
(14, 24, 8, 0, 1),
(17, 28, 15, 1, 0),
(18, 28, 17, 0, 1);

-- --------------------------------------------------------

--
-- Table structure for table `users`
--

CREATE TABLE `users` (
  `id` int(11) NOT NULL,
  `username` varchar(50) NOT NULL,
  `email` varchar(100) NOT NULL,
  `password` varchar(255) NOT NULL,
  `age` int(11) DEFAULT NULL,
  `role` enum('Hacker','Creator','Admin','Support') NOT NULL DEFAULT 'Hacker',
  `resetpass` varchar(450) DEFAULT NULL,
  `is_subscribed` tinyint(1) DEFAULT 0,
  `score` int(11) DEFAULT 0,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `resetpass_expires` datetime DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `users`
--

INSERT INTO `users` (`id`, `username`, `email`, `password`, `age`, `role`, `resetpass`, `is_subscribed`, `score`, `created_at`, `updated_at`, `resetpass_expires`) VALUES
(1, 'root', 'root@root.com', '$2y$10$1XWTtFcuSo4qAoMb7UWXoelbnQ51f/aKbpzdXwVoglO0Du2FEX3pm', 30, 'Admin', NULL, 0, 0, '2024-12-04 22:54:21', '2025-01-15 00:17:26', NULL),
(5, 'omar', 'maro@maro.com', '$2y$10$XM1od3sJ9bxRNU1HKvDE5.OBfQLeFZxqgFDBke3W28BJp3fW4n2oW', 20, 'Creator', NULL, 0, 20, '2024-11-18 17:25:12', '2024-12-04 21:58:25', NULL),
(8, 'Rawan', 'rawan@gmail.com', '$2y$10$6OUz.ss4OC/hdIgLD40H5e3bp6mcSjqVrl.Wkyz/7yccPqCX68E8S', 22, 'Hacker', NULL, 0, 0, '2024-11-30 21:08:18', '2025-01-14 15:15:28', NULL),
(10, 'support', 'sup@sup.com', '$2y$10$.A6SJSRnMNkPz.yUyuhNuu1boJkL5mT0SJCEO3rP969inqzlXmBwW', 20, 'Support', NULL, 0, 0, '2024-12-08 21:02:09', '2024-12-08 21:02:28', NULL),
(16, 'test', 'test@gmail.com', '$2y$10$smSu9Vw/.de76rD48T5dFuW1ZmVwlHgSTY3Z236NDcDRhSEKIheKq', 20, 'Admin', NULL, 0, 0, '2024-12-12 01:03:04', '2025-01-14 22:45:17', NULL),
(18, 'sara12', 'sara123@gmail.com', '$2y$10$sk1TVWkhyC8.GVOnb/ISHeUisvRynmTKwvUN0qvIFFcV0mP/n9UiG', 21, 'Creator', NULL, 0, 0, '2025-01-04 12:07:06', '2025-01-14 15:35:12', NULL),
(19, 'saga12', 'saga@gmail.com', '$2y$10$FesH7MUgAPXppcZidhgyM.evK3TI5gCPn11TrpZ2n6DF.UjgMzSfu', 20, 'Creator', NULL, 0, 0, '2025-01-14 15:49:56', '2025-01-15 00:17:23', NULL),
(21, 'user12', 'user1@gmail.com', '$2y$10$ENTPWg90y80Wz.ojHK4PTOiwuDa7btt0uo6dBK5NSXQOtamL71k3q', 20, 'Hacker', NULL, 0, 100, '2025-01-15 06:45:04', '2025-01-15 06:57:19', NULL),
(22, 'user2', 'user2@gmail.com', '$2y$10$dDIeEfTlUlyJZs7jnZp6cepm9gVGZCm0CqZ.VoiV2I1yzOuTIy.pG', NULL, 'Support', NULL, 0, 0, '2025-01-15 06:58:06', '2025-01-15 06:58:06', NULL),
(23, 'user30', 'user3@gmail.com', '$2y$10$zbO03NTeUTa0Qw/YeQJZhOkY0nFLqBYp69M8kGlSNpN.PlKabuVAa', 20, 'Hacker', NULL, 0, 100, '2025-01-15 07:11:46', '2025-01-15 07:20:35', NULL),
(24, 'omar', 'omar@security.com', '$2y$10$ebyAV1eTt7FHdMVdScP6yeZSNOvAeoPxLt6w5Ykh8dB0faCrDCuBS', 21, 'Hacker', NULL, 0, 75, '2025-01-18 11:49:45', '2025-01-18 12:47:20', NULL),
(25, 'hager', 'hager@security.com', '$2y$10$0nC6xUM89QS9RumOum0BmeEGp.fm9EPf4p2d7YiqYHNaeOA3hg6Tu', 21, 'Creator', NULL, 0, 0, '2025-01-18 11:50:15', '2025-01-18 11:51:18', NULL),
(26, 'rawan', 'rawan@security.com', '$2y$10$HOupB.jMGEXTy7B6M1GzWemKh5AvjN08mtxqUB2EHiAb4QtkqTbMO', 21, 'Admin', NULL, 0, 0, '2025-01-18 11:50:42', '2025-01-18 11:51:24', NULL),
(27, 'OMAR', 'dollaadolla15@gmail.com', '$2y$10$iMNyaJ5nu6/LXpmLXjeISuLsMnx5Afv1meXbVP90x9aYX.2HvfZii', 20, 'Hacker', NULL, 0, 0, '2025-05-06 01:05:24', '2025-05-06 01:27:39', NULL),
(28, 'RawaNnn', 'Rawan@creator.com', '$2y$10$HL19TL6qE8W0G/tgVhZ/qeNbrjC2A7t3LZpAaHtTCw77b3ePjWR8q', 22, 'Creator', NULL, 0, 75, '2025-05-23 04:12:27', '2025-05-23 08:03:28', NULL);

-- --------------------------------------------------------

--
-- Table structure for table `user_labs`
--

CREATE TABLE `user_labs` (
  `id` int(11) NOT NULL,
  `user_id` int(11) DEFAULT NULL,
  `lab_id` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Indexes for dumped tables
--

--
-- Indexes for table `contact`
--
ALTER TABLE `contact`
  ADD PRIMARY KEY (`id`),
  ADD KEY `user_id` (`user_id`);

--
-- Indexes for table `functionality_for_roles`
--
ALTER TABLE `functionality_for_roles`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `labs`
--
ALTER TABLE `labs`
  ADD PRIMARY KEY (`lab_id`),
  ADD KEY `admin_id` (`admin_id`),
  ADD KEY `creator_id` (`creator_id`);

--
-- Indexes for table `lab_attempts`
--
ALTER TABLE `lab_attempts`
  ADD PRIMARY KEY (`attempt_id`),
  ADD KEY `user_id` (`user_id`),
  ADD KEY `lab_id` (`lab_id`);

--
-- Indexes for table `users`
--
ALTER TABLE `users`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `user_labs`
--
ALTER TABLE `user_labs`
  ADD PRIMARY KEY (`id`),
  ADD KEY `user_id` (`user_id`),
  ADD KEY `lab_id` (`lab_id`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `contact`
--
ALTER TABLE `contact`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;

--
-- AUTO_INCREMENT for table `functionality_for_roles`
--
ALTER TABLE `functionality_for_roles`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=5;

--
-- AUTO_INCREMENT for table `labs`
--
ALTER TABLE `labs`
  MODIFY `lab_id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=21;

--
-- AUTO_INCREMENT for table `lab_attempts`
--
ALTER TABLE `lab_attempts`
  MODIFY `attempt_id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=19;

--
-- AUTO_INCREMENT for table `users`
--
ALTER TABLE `users`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=29;

--
-- AUTO_INCREMENT for table `user_labs`
--
ALTER TABLE `user_labs`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- Constraints for dumped tables
--

--
-- Constraints for table `contact`
--
ALTER TABLE `contact`
  ADD CONSTRAINT `contact_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `labs`
--
ALTER TABLE `labs`
  ADD CONSTRAINT `labs_ibfk_1` FOREIGN KEY (`admin_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `labs_ibfk_2` FOREIGN KEY (`creator_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `lab_attempts`
--
ALTER TABLE `lab_attempts`
  ADD CONSTRAINT `lab_attempts_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `lab_attempts_ibfk_2` FOREIGN KEY (`lab_id`) REFERENCES `labs` (`lab_id`) ON DELETE CASCADE;

--
-- Constraints for table `user_labs`
--
ALTER TABLE `user_labs`
  ADD CONSTRAINT `user_labs_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `user_labs_ibfk_2` FOREIGN KEY (`lab_id`) REFERENCES `labs` (`lab_id`) ON DELETE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
